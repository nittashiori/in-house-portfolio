---
import Navigation from './Navigation.astro';
import SwitchTheme from './Switch/SwitchTheme.astro';
import Hamburger from './Hamburger.astro';
---
<header class="c-header">
  <Navigation />
  <SwitchTheme />
  <Hamburger />
</header>

<script type="module">
  const navigation = document.querySelector('.c-navigation');
  const hamburger = document.querySelector('.c-hamburger');

  document.querySelector('.c-hamburger').addEventListener('click', () => {
    toggleHamburger();
  });

  const anchers = document.querySelectorAll('.c-navigation a');
  anchers.forEach((ancher) => {
    ancher.addEventListener('click', () => {
      toggleHamburger();
    })
  })

  function toggleHamburger () {
    if (hamburger.classList.contains('is-expanded')) {
      navigation.classList.remove('is-expanded');
      hamburger.classList.remove('is-expanded');
      hamburger.setAttribute('aria-pressed', false);
    } else {
      navigation.classList.add('is-expanded');
      hamburger.classList.add('is-expanded');
      hamburger.setAttribute('aria-pressed', true);
    }
  }
</script>

<style>
  .c-header {
    width: 100%;
    height: 6.4rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-xs-2) var(--space-s);
    position: relative;
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 2;

    @media (min-width: 768px) {
      height: auto;
    }

    .c-navigation {
      width: 100vw;
      height: 100svh;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 0;

      .lists {
        width: 32vw;
        min-width: 200px;
        display: flex;
        align-items: center;
        opacity: 0;
        scale: 0;
        transform-origin: top right;
        position: absolute;
        top: 0.8rem;
        right: 0.8rem;
        z-index: -2;
        transition: scale 0.3s ease-out 0.3s, opacity 0.2s ease-in-out;

        &::after {
          content: "";
          width: 100%;
          height: 100%;
          background: var(--color-background-default);
          box-shadow: var(--shadow-xl);
          border-radius: var(--round-l);
          position: absolute;
          top: 0;
          right: 0;
          z-index: -1;
        }
      }
    }

    .c-navigation.is-expanded {
      display: block;

      .lists {
        opacity: 1;
        scale: 1;
      }
    }

    .c-switch-theme {
      position: relative;
      z-index: -1;
    }

    @media (min-width: 768px) {
      .c-navigation {
        display: block;
        width: auto;
        min-width: auto;
        height: auto;
        position: relative;

        .lists {
          width: 100%;
          opacity: 1;
          scale: 1;
          position: relative;
          top: auto;
          right: auto;
          &::after {
            display: none;
          }
        }
      }
    }
  }
</style>