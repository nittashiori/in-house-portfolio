---
interface Props {
  id?: string;
  className?: string;
  variants?: 'default' | 'primary' | 'success' | 'warning' | 'alert';
  style?: 'solid' | 'outline' | 'ghost' | 'link';
  disabled?: boolean;
  size?: 'xsmall' | 'small' | 'medium' | 'large' | 'full';
	href?: string;
  type?: 'button' | 'submit' | 'reset';
  width?: string;
  dataOnclick?: string;
}

const {
  id,
  className,
  variants = 'default',
  style = 'solid',
  disabled = false,
  size = 'medium',
  href,
  type = 'button',
  width = 'auto',
  dataOnclick
} = Astro.props;
---
{ href ?
  <a
    {...(id ? { id: id } : {})}
    class={`c-button ${className || ''} ${variants} ${style} ${size} ${disabled ? disabled : ''}`}
    href={href}
    style={width !=="auto" ? `max-width: ${width}; width: 100%;` : ''}
    data-onclick={dataOnclick}
  >
    <slot />
  </a>
  :
  <button
    {...(id ? { id: id } : {})}
    class={`c-button ${className || ''} ${variants} ${style} ${size} ${disabled ? disabled : ''}`}
    type={type}
    disabled={disabled}
    style={width !=="auto" ? `max-width: ${width}; width: 100%;` : ''}
    data-onclick={dataOnclick}
  >
    <slot />
  </button>
}

<style>
  .c-button {
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: var(--space-2) calc(var(--space-2) + var(--space-base));
    font-size: 1em;
    font-weight: bold;
    text-align: center;
    color: var(--color-foreground-default);
    background: var(--color-button-default);
    border-radius: var(--round-m);

    .icon {
      width: 1em;
      height: auto;
    }

    &:has(.icon) {
      padding: var(--space-2);
      min-width: auto;
    }

    @media (hover: hover) {
      &:hover {
        background: var(--color-button-hover);
      }
    }

    &:active {
      background: var(--color-button-active);
    }

    &:focus {
      outline: none;
      box-shadow: var(--shadow-focus);
    }

    &:disabled {
      pointer-events: none;
      color: var(--color-foreground-disabled);
      background: var(--color-button-disabled);
    }

    &.outline {
      background: transparent;
      border: 1px solid var(--color-border-default);

      @media (hover: hover) {
        &:hover {
          background: var(--color-button-hover);
        }
      }
      
      &:active {
        background: var(--color-button-active);
      }

      &:disabled {
        border: 1px solid var(--color-border-disabled);
      }
    }

    &.ghost {
      background: transparent;

      @media (hover: hover) {
        &:hover {
          background: var(--color-button-hover);
        }
      }
      
      &:active {
        background: var(--color-button-active);
      }
    }

    &.link {
      background: transparent;
      text-decoration: underline;

      @media (hover: hover) {
        &:hover {
          background: var(--color-button-hover);
        }
      }
      
      &:active {
        background: var(--color-button-active);
      }
    }

    /* Variants + Styles */
    &.primary {
      color: var(--color-foreground-on-fill);
      background: var(--color-button-primary-default);

      @media (hover: hover) {
        &:hover{
          background: var(--color-button-primary-hover);
        }
      }

      &:active {
        background: var(--color-button-primary-active);
      }

      &.outline {
        background: transparent;
        color: var(--color-foreground-primary);
        border: 1px solid var(--color-border-primary);

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-primary-muted-hover);
          }
        }
        
        &:active {
          background: var(--color-button-primary-muted-active);
        }

        &:disabled {
          color: var(--color-foreground-disabled);
          border: 1px solid var(--color-border-disabled);
        }
      }

      &.ghost {
        color: var(--color-foreground-primary);
        background: transparent;

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-hover);
          }
        }

        &:active {
          background: var(--color-button-active);
        }
      }

      &.link {
        color: var(--color-foreground-primary);
        background: transparent;
        text-decoration: underline;

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-hover);
          }
        }
        
        &:active {
          background: var(--color-button-active);
        }
      }
    }

    &.success {
      color: var(--color-foreground-on-fill);
      background: var(--color-button-success-default);

      @media (hover: hover) {
        &:hover {
          background: var(--color-button-success-hover);
        }
      }
      
      &:active {
        background: var(--color-button-success-active);
      }

      &.outline {
        background: transparent;
        color: var(--color-foreground-success);
        border: 1px solid var(--color-border-success);

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-success-muted-hover);
          }
        }
        
        &:active {
          background: var(--color-button-success-muted-active);
        }

        &:disabled {
          color: var(--color-foreground-disabled);
          border: 1px solid var(--color-border-disabled);
        }
      }

      &.ghost {
        color: var(--color-foreground-success);
        background: transparent;

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-hover);
          }
        }

        &:active {
          background: var(--color-button-active);
        }
      }

      &.link {
        color: var(--color-foreground-success);
        background: transparent;
        text-decoration: underline;

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-hover);
          }
        }
        
        &:active {
          background: var(--color-button-active);
        }
      }
    }

    &.warning {
      color: var(--color-foreground-on-fill);
      background: var(--color-button-warning-default);

      @media (hover: hover) {
        &:hover {
          background: var(--color-button-warning-hover);
        }
      }
      
      &:active {
        background: var(--color-button-warning-active);
      }

      &.outline {
        background: transparent;
        color: var(--color-foreground-warning);
        border: 1px solid var(--color-border-warning);

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-warning-muted-hover);
          }
        }
        
        &:active {
          background: var(--color-button-warning-muted-active);
        }

        &:disabled {
          color: var(--color-foreground-disabled);
          border: 1px solid var(--color-border-disabled);
        }
      }

      &.ghost {
        color: var(--color-foreground-warning);
        background: transparent;

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-hover);
          }
        }

        &:active {
          background: var(--color-button-active);
        }
      }

      &.link {
        color: var(--color-foreground-warning);
        background: transparent;
        text-decoration: underline;

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-hover);
          }
        }
        
        &:active {
          background: var(--color-button-active);
        }
      }
    }

    &.alert {
      color: var(--color-foreground-on-fill);
      background: var(--color-button-alert-default);

      @media (hover: hover) {
        &:hover {
          background: var(--color-button-alert-hover);
        }
      }

      &:active {
        background: var(--color-button-alert-active);
      }

      &.outline {
        background: transparent;
        color: var(--color-foreground-alert);
        border: 1px solid var(--color-border-alert);

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-alert-muted-hover);
          }
        }

        &:active {
          background: var(--color-button-alert-muted-active);
        }

        &:disabled {
          color: var(--color-foreground-disabled);
          border: 1px solid var(--color-border-disabled);
        }
      }

      &.ghost {
        color: var(--color-foreground-alert);
        background: transparent;

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-hover);
          }
        }

        &:active {
          background: var(--color-button-active);
        }
      }

      &.link {
        color: var(--color-foreground-alert);
        background: transparent;
        text-decoration: underline;

        @media (hover: hover) {
          &:hover {
            background: var(--color-button-hover);
          }
        }

        &:active {
          background: var(--color-button-active);
        }
      }
    }

    /* Size */
    &.large {
      padding: var(--space-2-5) calc(var(--space-2-5) + var(--space-base));
      font-size: calc(1em * 1.125); /* 18px */

      .icon {
        width: calc(1em * 1.25); /* 20px */
      }

      &:has(.icon) {
        padding: var(--space-2-5);
      }
    }

    &.small {
      padding: var(--space-1-5) calc(var(--space-1-5) + var(--space-base));
      font-size: calc(1em * 0.875); /* 14px */
      gap: 4px;

      &:has(.icon) {
        padding: var(--space-1-5);
      }
    }

    &.xsmall {
      padding: var(--space-base) calc(var(--space-base) + var(--space-base));
      font-size: calc(1em * 0.75); /* 12px */
      gap: 4px;

      &:has(.icon) {
        padding: var(--space-base);
      }
    }

    &.full {
      width: 100%;
    }
  }
</style>